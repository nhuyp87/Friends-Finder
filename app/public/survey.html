<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Friend Finder Â· SURVEY</title>

	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
	 crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
	 crossorigin="anonymous"></script>

</head>

<body>

	<div class="container">

		<div class="page-header">
			<h1>Friend Finder - Survey <small>Take the survey, meet a friend.</small></h1>
		</div>

		<div class="row">
			<div class="col-lg-12">

				<div class="panel panel-primary">
					<div class="panel-heading">
						<h2 class="panel-title">About You</h2>
					</div>
					<div class="panel-body">
						<h4>Name (Required)</h4>
						<input type="text" name="" id="name" class="form-control" required>

						<h4>Link to Photo Image (Required)</h4>
						<input type="text" name="" id="photo" class="form-control" required>

					</div>
				</div>


			</div>
		</div>


		<footer class="footer">
			<div class="container">
				<p><a href="/api/friends">API Friends Link</a> | <a href="/api/waitlist">Github Repo</a></p>
			</div>
		</footer>

	</div>

</body>

</html>


<script type="text/javascript">
	$(document).ready(function () {


		$("#reserveSubmit").on("click", function () {

			event.preventDefault();

			$.get("/api/table", function (dataTable) {
				console.log(dataTable);

				var customer = {
					customerName: $("#reserve_name").val().trim(),
					phoneNumber: $("#reserve_phone").val().trim(),
					customerEmail: $("#reserve_email").val().trim(),
					customerID: $("#reserve_uniqueID").val().trim()
				};

				console.log(customer);

				if (dataTable.length < 5) {
					$.post("/api/new/table", customer)

						.done(function (data) {
							console.log(data);
							alert("Adding customer to table...");
						});

				} else {
					$.get("/api/wait", function (dataWait) {
						console.log(dataWait);

						$.post("/api/new/wait", customer)
							.done(function (data) {
								console.log(data);
								alert("Adding customer to waitlist...");
							});
					});
				}
			});


		});

	});

</script>